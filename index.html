<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8" />
        <title>VR experience in JS</title>
        <script src="https://aframe.io/releases/1.0.3/aframe.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/aframe-physics-system@4.0.1/dist/aframe-physics-system.min.js"></script>
        <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v4.1.2/dist/aframe-extras.min.js"></script>
        <script src="https://unpkg.com/super-hands@3.0.0/dist/super-hands.min.js"></script>
        <script>
	        AFRAME.registerComponent('change-color-on-hover', {
		        schema: {
			        color: {default: ''}
		        },

		        init: function () {
			        let data = this.data;
			        let el = this.el;  // <a-box>
                    this.schema.color.default = el.getAttribute('color');
			        let defaultColor = this.schema.color.default.color;

			        el.addEventListener('mouseenter', function () {
				        el.setAttribute('color', data.color);
			        });

			        el.addEventListener('mouseleave', function () {
				        el.setAttribute('color', defaultColor);
			        });
		        }
	        });

	        AFRAME.registerComponent('x-button-listener', {
		        init: function () {
			        let el = this.el;
			        el.addEventListener('xbuttondown', e => el.setAttribute('visible', !el.getAttribute('visible')));
		        }
	        });

	        AFRAME.registerComponent('a-button-listener', {
		        init: function () {
			        let el = this.el;
			        el.addEventListener('abuttondown', e => el.setAttribute('visible', !el.getAttribute('visible')));
		        }
	        });

	        AFRAME.scenes[0].querySelector('[raycaster]').components.raycaster.refreshObjects();
        </script>
    </head>
    <body>
        <a-scene>
            <a-assets></a-assets>
            <a-entity>
                <a-camera></a-camera>
                <a-entity sphere-collider="objects: a-box" super-hands hand-controls="left"></a-entity>
                <a-entity sphere-collider="objects: a-box" super-hands hand-controls="right"></a-entity>
            </a-entity>
            <!-- hover & drag-drop won't have any obvious effect without some additional event handlers or components. See the examples page for more -->
            <a-box hoverable
                   grabbable
                   stretchable
                   draggable
                   dropppable
                   color="blue"
                   position="0 4 -2"></a-box>
        </a-scene>
    </body>
</html>
